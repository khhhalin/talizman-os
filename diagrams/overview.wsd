@startuml overview
title Talisman OS - Big Picture Overview

!include enums.wsd
hide enum

' Core singletons and scenes
class GameState <<Autoload>> {
  + host_game(name: String)
  + join_game(ip: String, name: String)
  + begin_game()
  + end_game()
  --signals--
  + player_list_changed()
  + connection_failed()
  + connection_succeeded()
  + game_ended()
  + game_error(what: String)
}

class LobbyScene <<Control>>
class GameWorld <<Node2D>>
class BoardManager <<Node2D>>
class UIManager <<CanvasLayer>>
class TurnManager <<Autoload>>
class CardManager <<Autoload>>
class NetworkManager <<Node>>
class Player <<CharacterBody2D>>
class Inputs <<Node>>
class Inventory <<Node>>
class StandardCard <<Resource>>
class CombatManager <<Node>>

' High-level relationships
GameState --> LobbyScene : manages
GameState --> GameWorld : transitions to
LobbyScene --> GameWorld : loads

GameWorld --> BoardManager : contains
GameWorld --> UIManager : contains
GameWorld --> TurnManager : uses
GameWorld --> Player : spawns

BoardManager --> GameWorld : board
UIManager --> GameWorld : ui layer

Player --> Inputs : has
Player --> Inventory : owns

CardManager --> StandardCard : manages decks
BoardManager --> "Spaces" : contains

NetworkManager --> GameState : sync lifecycle
NetworkManager --> Player : sync state

CombatManager --> Player : involves
CombatManager --> StandardCard : consumes
UIManager --> CombatManager : coordinates

@enduml
